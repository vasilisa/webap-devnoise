{"ast":null,"code":"var _jsxFileName = \"/Users/vasilisaskvortsova/Documents/RLNOISE_KIDS/webap-rlnoise-kids/src/components/Instructions/Instructions.js\";\nimport React from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { Button } from 'react-bootstrap';\nimport { API_URL } from '../../config';\nimport { handleResponse } from '../helpers';\nimport queryString from 'query-string';\nimport './Instructions.css';\n/*\nInstruction component is created when the particpant accepts terms and conditions and proceeds to the experiment. \nIt loads the participant id, and the block configurations that will be played during the game. \n*/\n\nlet {\n  StyleSheet\n} = React;\nlet styles = StyleSheet.create({\n  backgroundImage: {\n    flex: 1,\n    resizeMode: 'cover' // or 'stretch'\n\n  }\n});\n\nclass Instructions extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.redirectToTarget = () => {\n      this.props.history.push({\n        pathname: `/Block`,\n        // /Block CHANGE BACK \n        state: {\n          participant_info: this.state,\n          newblock_frame: this.state.newblock_frame\n        }\n      });\n    };\n\n    const prolific_id = 'undefined';\n    var currentDate = new Date();\n    var date = currentDate.getDate();\n    var month = currentDate.getMonth(); //Be careful! January is 0 not 1\n\n    var year = currentDate.getFullYear();\n    var dateString = date + \"-\" + (month + 1) + \"-\" + year;\n    this.state = {\n      date: dateString,\n      participant_id: 1,\n      // default\n      game_id: '',\n      // to be determined \n      block_number: 0,\n      currentInstructionText: 1,\n      TotalBlock: 3,\n      newblock_frame: true,\n      readyToProceed: false,\n      redirect: false,\n      prolific_id: prolific_id\n    };\n    this.handleInstructionsLocal = this.handleInstructionsLocal.bind(this); // bind the method to avoid error on frames collapsed\n\n    this.fetchParticipantInfo.bind(this);\n    this.fetchParticipantGameId.bind(this);\n  }\n\n  // Mount the component to call the BACKEND and GET the information\n  componentWillMount() {\n    document.body.style.background = \"fff\";\n    this.fetchParticipantInfo();\n  }\n\n  fetchParticipantInfo() {\n    fetch(`${API_URL}/participants_data/last_participant_id`).then(handleResponse).then(data => {\n      const participant_id_ = parseInt(data['new_participant_id']);\n      console.log(participant_id_);\n      this.setState({\n        participant_id: participant_id_\n      });\n      this.fetchParticipantGameId(participant_id_);\n    }).catch(error => {\n      console.log(error);\n    });\n  } // Based on the participant ID, determine the game_id and then fetch the game specifications \n\n\n  fetchParticipantGameId() {\n    fetch(`${API_URL}/participants_game/` + this.state.participant_id + '/' + this.state.prolific_id + '/' + this.state.date).then(handleResponse).then(data => {\n      const game_id_ = parseInt(data['game_id']);\n      console.log(game_id_);\n      this.setState({\n        game_id: game_id_\n      });\n    }).catch(error => {\n      console.log(error);\n    });\n  } // Transition between the instruction screens   \n\n\n  handleInstructionsLocal(event) {\n    var curText = this.state.currentInstructionText;\n    var whichButton = event.currentTarget.id;\n\n    if (whichButton === \"left\" && curText > 1) {\n      this.setState({\n        currentInstructionText: curText - 1\n      });\n    } else if (whichButton === \"right\" && curText < 5) {\n      this.setState({\n        currentInstructionText: curText + 1\n      });\n    }\n\n    if (whichButton === \"right\" && curText === 3) {\n      this.setState({\n        readyToProceed: true\n      });\n    }\n  } // change the router type to pass the props to the child component \n\n\n  render() {\n    let mytext;\n\n    if (this.state.currentInstructionText === 1) {\n      mytext = React.createElement(\"div\", {\n        className: \"textbox\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, \" \", React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, \" Wellcome on board of the space explorer!\"), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        class: \"bold\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, \"Your goal is to help us find the planet with more resources!\"), \". \"), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, \" At the end of the game, you will receive a score telling you how well you did.\"));\n      React.createElement(Image, {\n        source: require('../../images/sky.png'),\n        style: styles.backgroundImage,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      });\n    } else if (this.state.currentInstructionText === 2) {\n      mytext = React.createElement(\"div\", {\n        className: \"textbox\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, \" \", React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }), \" \", React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, \"You will make choice between two planets.\"), React.createElement(\"div\", {\n        className: \"translate\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"symbolframe\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        className: \"introsymbol\",\n        src: require('../../images/planet_5.png'),\n        alt: \"introsymbol\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }), React.createElement(\"img\", {\n        className: \"introsymbol\",\n        src: require('../../images/planet_6.png'),\n        alt: \"introsymbol\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      })), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, \"After each choice you will see how many diamonds (between 1 and 99) you managed to dig from the planet!\"), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, \"There is always one planet that gives more diamonds during some time but it will change through the game!\"), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, \"You should pay attention and try to remember the outcomes of your previous choices in order to select the right planet!\"));\n    } else if (this.state.currentInstructionText === 3) {\n      mytext = React.createElement(\"div\", {\n        className: \"textbox\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }, \" \", React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, \"Sometimes even a good planet could give fewer diamonds, and a bad planet could pay a lot but you should consider several digs in a row when making your choice!\"));\n    }\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"center translate\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"InstructText\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, React.createElement(\"center\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      class: \"bold\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, \"INSTRUCTIONS\"))), React.createElement(\"center\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"instructionsButtonContainer\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }, this.state.currentInstructionText > 1 ? // id helps get which button was clicked to handle the \n    React.createElement(Button, {\n      id: \"left\",\n      className: \"buttonInstructions\",\n      onClick: this.handleInstructionsLocal,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      class: \"bold\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }, \"\\u2190\")) : React.createElement(Button, {\n      id: \"left\",\n      className: \"buttonInstructionsHidden\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      class: \"bold\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    }, \"\\u2190\")), this.state.currentInstructionText < 3 ? React.createElement(Button, {\n      id: \"right\",\n      className: \"buttonInstructions\",\n      onClick: this.handleInstructionsLocal,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      class: \"bold\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }, \"\\u2192\")) : React.createElement(Button, {\n      id: \"right\",\n      className: \"buttonInstructionsHidden\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      class: \"bold\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }, \"\\u2192\")), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    }, mytext), this.state.readyToProceed ? React.createElement(\"div\", {\n      className: \"buttonInstructionStart\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188\n      },\n      __self: this\n    }, React.createElement(\"center\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      className: \"textbox\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }, \" Let's practice !\"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }), React.createElement(Button, {\n      className: \"buttonInstructionStart\",\n      onClick: () => this.redirectToTarget(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      class: \"bold\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192\n      },\n      __self: this\n    }, \"START\")))) : null)))));\n  }\n\n}\n\nexport default withRouter(Instructions);","map":{"version":3,"sources":["/Users/vasilisaskvortsova/Documents/RLNOISE_KIDS/webap-rlnoise-kids/src/components/Instructions/Instructions.js"],"names":["React","withRouter","Button","API_URL","handleResponse","queryString","StyleSheet","styles","create","backgroundImage","flex","resizeMode","Instructions","Component","constructor","props","redirectToTarget","history","push","pathname","state","participant_info","newblock_frame","prolific_id","currentDate","Date","date","getDate","month","getMonth","year","getFullYear","dateString","participant_id","game_id","block_number","currentInstructionText","TotalBlock","readyToProceed","redirect","handleInstructionsLocal","bind","fetchParticipantInfo","fetchParticipantGameId","componentWillMount","document","body","style","background","fetch","then","data","participant_id_","parseInt","console","log","setState","catch","error","game_id_","event","curText","whichButton","currentTarget","id","render","mytext","require"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAAQC,UAAR,QAAyB,kBAAzB;AACA,SAASC,MAAT,QAAuB,iBAAvB;AAEA,SAASC,OAAT,QAAwB,cAAxB;AACA,SAASC,cAAT,QAA+B,YAA/B;AAEA,OAAOC,WAAP,MAAwB,cAAxB;AAEA,OAAO,oBAAP;AAEA;;;;;AAKA,IAAI;AAAEC,EAAAA;AAAF,IAAiBN,KAArB;AAEA,IAAIO,MAAM,GAAGD,UAAU,CAACE,MAAX,CAAkB;AAC7BC,EAAAA,eAAe,EAAE;AACfC,IAAAA,IAAI,EAAE,CADS;AAEfC,IAAAA,UAAU,EAAE,OAFG,CAEM;;AAFN;AADY,CAAlB,CAAb;;AAOA,MAAMC,YAAN,SAA2BZ,KAAK,CAACa,SAAjC,CAA2C;AACvCC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;;AADe,SAyFnBC,gBAzFmB,GAyFA,MAAM;AAEzB,WAAKD,KAAL,CAAWE,OAAX,CAAmBC,IAAnB,CAAwB;AACrBC,QAAAA,QAAQ,EAAG,QADU;AACD;AACpBC,QAAAA,KAAK,EAAE;AAACC,UAAAA,gBAAgB,EAAE,KAAKD,KAAxB;AAA+BE,UAAAA,cAAc,EAAC,KAAKF,KAAL,CAAWE;AAAzD;AAFc,OAAxB;AAIC,KA/FkB;;AAGf,UAAMC,WAAW,GAAG,WAApB;AAEA,QAAIC,WAAW,GAAG,IAAIC,IAAJ,EAAlB;AACA,QAAIC,IAAI,GAAUF,WAAW,CAACG,OAAZ,EAAlB;AACA,QAAIC,KAAK,GAASJ,WAAW,CAACK,QAAZ,EAAlB,CAPe,CAO2B;;AAC1C,QAAIC,IAAI,GAAUN,WAAW,CAACO,WAAZ,EAAlB;AACA,QAAIC,UAAU,GAAIN,IAAI,GAAG,GAAP,IAAaE,KAAK,GAAG,CAArB,IAA0B,GAA1B,GAAgCE,IAAlD;AAGA,SAAKV,KAAL,GAAa;AACTM,MAAAA,IAAI,EAAEM,UADG;AAETC,MAAAA,cAAc,EAAG,CAFR;AAEW;AACpBC,MAAAA,OAAO,EAAG,EAHD;AAGW;AACpBC,MAAAA,YAAY,EAAG,CAJN;AAKTC,MAAAA,sBAAsB,EAAE,CALf;AAMTC,MAAAA,UAAU,EAAE,CANH;AAOTf,MAAAA,cAAc,EAAG,IAPR;AAQTgB,MAAAA,cAAc,EAAE,KARP;AASTC,MAAAA,QAAQ,EAAE,KATD;AAUThB,MAAAA,WAAW,EAAGA;AAVL,KAAb;AAaJ,SAAKiB,uBAAL,GAA+B,KAAKA,uBAAL,CAA6BC,IAA7B,CAAkC,IAAlC,CAA/B,CAzBmB,CAyBoD;;AACvE,SAAKC,oBAAL,CAA0BD,IAA1B,CAA+B,IAA/B;AACA,SAAKE,sBAAL,CAA4BF,IAA5B,CAAiC,IAAjC;AAEC;;AAED;AACAG,EAAAA,kBAAkB,GAAG;AACrBC,IAAAA,QAAQ,CAACC,IAAT,CAAcC,KAAd,CAAoBC,UAApB,GAAiC,KAAjC;AACA,SAAKN,oBAAL;AACC;;AAEDA,EAAAA,oBAAoB,GAAI;AACnBO,IAAAA,KAAK,CAAE,GAAE9C,OAAQ,wCAAZ,CAAL,CACG+C,IADH,CACQ9C,cADR,EAEG8C,IAFH,CAESC,IAAD,IAAU;AACd,YAAMC,eAAe,GAAGC,QAAQ,CAACF,IAAI,CAAC,oBAAD,CAAL,CAAhC;AAEDG,MAAAA,OAAO,CAACC,GAAR,CAAYH,eAAZ;AAEA,WAAKI,QAAL,CAAc;AACLvB,QAAAA,cAAc,EAAGmB;AADZ,OAAd;AAGC,WAAKT,sBAAL,CAA4BS,eAA5B;AACH,KAXD,EAYGK,KAZH,CAYUC,KAAD,IAAW;AACjBJ,MAAAA,OAAO,CAACC,GAAR,CAAYG,KAAZ;AACF,KAdD;AAeA,GAtDkC,CAwDvC;;;AACAf,EAAAA,sBAAsB,GAAG;AACrBM,IAAAA,KAAK,CAAE,GAAE9C,OAAQ,qBAAX,GAAgC,KAAKiB,KAAL,CAAWa,cAA3C,GAA2D,GAA3D,GAA+D,KAAKb,KAAL,CAAWG,WAA1E,GAAuF,GAAvF,GAA2F,KAAKH,KAAL,CAAWM,IAAvG,CAAL,CACIwB,IADJ,CACS9C,cADT,EAEI8C,IAFJ,CAEUC,IAAD,IAAU;AACd,YAAMQ,QAAQ,GAAGN,QAAQ,CAACF,IAAI,CAAC,SAAD,CAAL,CAAzB;AACDG,MAAAA,OAAO,CAACC,GAAR,CAAYI,QAAZ;AACA,WAAKH,QAAL,CAAc;AACLtB,QAAAA,OAAO,EAAGyB;AADL,OAAd;AAGF,KARF,EASIF,KATJ,CASWC,KAAD,IAAW;AACjBJ,MAAAA,OAAO,CAACC,GAAR,CAAYG,KAAZ;AACF,KAXF;AAYC,GAtEkC,CAwEvC;;;AACAlB,EAAAA,uBAAuB,CAACoB,KAAD,EAAO;AAC1B,QAAIC,OAAO,GAAO,KAAKzC,KAAL,CAAWgB,sBAA7B;AACA,QAAI0B,WAAW,GAAGF,KAAK,CAACG,aAAN,CAAoBC,EAAtC;;AAEA,QAAGF,WAAW,KAAG,MAAd,IAAwBD,OAAO,GAAG,CAArC,EAAuC;AACvC,WAAKL,QAAL,CAAc;AAACpB,QAAAA,sBAAsB,EAAEyB,OAAO,GAAC;AAAjC,OAAd;AACC,KAFD,MAGK,IAAGC,WAAW,KAAG,OAAd,IAAyBD,OAAO,GAAG,CAAtC,EAAwC;AAE7C,WAAKL,QAAL,CAAc;AAACpB,QAAAA,sBAAsB,EAAEyB,OAAO,GAAC;AAAjC,OAAd;AACC;;AACD,QAAGC,WAAW,KAAG,OAAd,IAAyBD,OAAO,KAAK,CAAxC,EAA0C;AAC1C,WAAKL,QAAL,CAAc;AAAClB,QAAAA,cAAc,EAAE;AAAjB,OAAd;AACC;AACJ,GAvFsC,CAyFvC;;;AASA2B,EAAAA,MAAM,GAAG;AACL,QAAIC,MAAJ;;AACA,QAAI,KAAK9C,KAAL,CAAWgB,sBAAX,KAAoC,CAAxC,EAA2C;AACvC8B,MAAAA,MAAM,GAAG;AAAK,QAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAA0B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAA1B,EACT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qDADS,EAET;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAG;AAAM,QAAA,KAAK,EAAC,MAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wEAAH,OAFS,EAGT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2FAHS,CAAT;AAIA,0BAAC,KAAD;AAAO,QAAA,MAAM,EAAEC,OAAO,CAAC,sBAAD,CAAtB;AAAgD,QAAA,KAAK,EAAE5D,MAAM,CAACE,eAA9D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACH,KAND,MAOK,IAAI,KAAKW,KAAL,CAAWgB,sBAAX,KAAoC,CAAxC,EAA2C;AAChD8B,MAAAA,MAAM,GAAG;AAAK,QAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAA0B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAA1B,OAAkC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qDAAlC,EACD;AAAK,QAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADC,EAED;AAAK,QAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAK,QAAA,SAAS,EAAC,aAAf;AAA8B,QAAA,GAAG,EAAEC,OAAO,CAAC,2BAAD,CAA1C;AAAyE,QAAA,GAAG,EAAC,aAA7E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,EAEI;AAAK,QAAA,SAAS,EAAC,aAAf;AAA8B,QAAA,GAAG,EAAEA,OAAO,CAAC,2BAAD,CAA1C;AAAyE,QAAA,GAAG,EAAC,aAA7E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFJ,CAFC,EAMD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mHANC,EAOD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qHAPC,EAQD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mIARC,CAAT;AAWK,KAZA,MAcA,IAAI,KAAK/C,KAAL,CAAWgB,sBAAX,KAAoC,CAAxC,EAA2C;AAC5C8B,MAAAA,MAAM,GAAG;AAAK,QAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAA0B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAA1B,EACT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2KADS,CAAT;AAGH;;AAED,WACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACA;AAAK,MAAA,SAAS,EAAC,kBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACA;AAAK,MAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACA;AAAG,MAAA,SAAS,EAAC,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAqB;AAAM,MAAA,KAAK,EAAC,MAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAArB,CADA,CADA,EAII;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACA;AAAK,MAAA,SAAS,EAAC,6BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEK,KAAK9C,KAAL,CAAWgB,sBAAX,GAAoC,CAApC,GAAwC;AAErC,wBAAC,MAAD;AAAQ,MAAA,EAAE,EAAC,MAAX;AAAkB,MAAA,SAAS,EAAC,oBAA5B;AAAiD,MAAA,OAAO,EAAE,KAAKI,uBAA/D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAM,MAAA,KAAK,EAAC,MAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,CAFH,GAMG,oBAAC,MAAD;AAAQ,MAAA,EAAE,EAAC,MAAX;AAAkB,MAAA,SAAS,EAAC,0BAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAM,MAAA,KAAK,EAAC,MAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,CARR,EAaK,KAAKpB,KAAL,CAAWgB,sBAAX,GAAoC,CAApC,GACG,oBAAC,MAAD;AAAQ,MAAA,EAAE,EAAC,OAAX;AAAmB,MAAA,SAAS,EAAC,oBAA7B;AAAkD,MAAA,OAAO,EAAE,KAAKI,uBAAhE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAM,MAAA,KAAK,EAAC,MAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,CADH,GAKG,oBAAC,MAAD;AAAQ,MAAA,EAAE,EAAC,OAAX;AAAmB,MAAA,SAAS,EAAC,0BAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAM,MAAA,KAAK,EAAC,MAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,CAlBR,EAuBI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACK0B,MADL,CAvBJ,EA0BK,KAAK9C,KAAL,CAAWkB,cAAX,GACD;AAAK,MAAA,SAAS,EAAC,wBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAO,MAAA,SAAS,EAAC,SAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BADJ,EACwD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADxD,EAEI,oBAAC,MAAD;AAAQ,MAAA,SAAS,EAAC,wBAAlB;AAA2C,MAAA,OAAO,EAAE,MAAI,KAAKtB,gBAAL,EAAxD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAM,MAAA,KAAK,EAAC,MAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADJ,CAFJ,CADA,CADC,GAUC,IApCN,CADA,CAJJ,CADA,CADA,CADJ;AAoDH;;AAnLsC;;AAsL3C,eAAef,UAAU,CAACW,YAAD,CAAzB","sourcesContent":["import React from 'react';\nimport {withRouter} from 'react-router-dom';\nimport { Button } from 'react-bootstrap';\n\nimport { API_URL } from '../../config';\nimport { handleResponse } from '../helpers';\n\nimport queryString from 'query-string';\n\nimport './Instructions.css';\n\n/*\nInstruction component is created when the particpant accepts terms and conditions and proceeds to the experiment. \nIt loads the participant id, and the block configurations that will be played during the game. \n*/\n\nlet { StyleSheet } = React;\n\nlet styles = StyleSheet.create({\n  backgroundImage: {\n    flex: 1,\n    resizeMode: 'cover', // or 'stretch'\n  }\n});\n\nclass Instructions extends React.Component {\n    constructor(props) {\n        super(props);\n\n        const prolific_id = 'undefined'\n\n        var currentDate = new Date();\n        var date        = currentDate.getDate();\n        var month       = currentDate.getMonth(); //Be careful! January is 0 not 1\n        var year        = currentDate.getFullYear();\n        var dateString  = date + \"-\" +(month + 1) + \"-\" + year;\n    \n\n        this.state = {\n            date: dateString,\n            participant_id : 1, // default\n            game_id : '',       // to be determined \n            block_number : 0, \n            currentInstructionText: 1,\n            TotalBlock: 3, \n            newblock_frame : true, \n            readyToProceed: false,\n            redirect: false,\n            prolific_id : prolific_id \n        }\n\n    this.handleInstructionsLocal = this.handleInstructionsLocal.bind(this) // bind the method to avoid error on frames collapsed\n    this.fetchParticipantInfo.bind(this); \n    this.fetchParticipantGameId.bind(this); \n       \n    }; \n\n    // Mount the component to call the BACKEND and GET the information\n    componentWillMount() {\n    document.body.style.background = \"fff\";  \n    this.fetchParticipantInfo();\n    } \n    \n    fetchParticipantInfo () {\n         fetch(`${API_URL}/participants_data/last_participant_id`) \n           .then(handleResponse)\n           .then((data) => {\n             const participant_id_ = parseInt(data['new_participant_id'])\n             \n            console.log(participant_id_)\n            \n            this.setState({\n                     participant_id : participant_id_,\n                 });\n             this.fetchParticipantGameId(participant_id_)\n         })\n           .catch((error) => {\n            console.log(error)\n         });\n        }\n\n    // Based on the participant ID, determine the game_id and then fetch the game specifications \n    fetchParticipantGameId() {\n        fetch(`${API_URL}/participants_game/`+this.state.participant_id +'/'+this.state.prolific_id +'/'+this.state.date) \n           .then(handleResponse)\n           .then((data) => {\n             const game_id_ = parseInt(data['game_id'])\n            console.log(game_id_)\n            this.setState({\n                     game_id : game_id_,\n                 });\n         })\n           .catch((error) => {\n            console.log(error)\n         });\n        }\n\n    // Transition between the instruction screens   \n    handleInstructionsLocal(event){\n        var curText     = this.state.currentInstructionText;\n        var whichButton = event.currentTarget.id;\n    \n        if(whichButton===\"left\" && curText > 1){\n        this.setState({currentInstructionText: curText-1});\n        }\n        else if(whichButton===\"right\" && curText < 5){\n      \n        this.setState({currentInstructionText: curText+1});\n        }\n        if(whichButton===\"right\" && curText === 3){\n        this.setState({readyToProceed: true});\n        }\n    }\n\n    // change the router type to pass the props to the child component \n    redirectToTarget = () => {\n\n    this.props.history.push({\n       pathname: `/Block`, // /Block CHANGE BACK \n       state: {participant_info: this.state, newblock_frame:this.state.newblock_frame} \n     })\n    }\n\n    render() {\n        let mytext\n        if (this.state.currentInstructionText===1) {\n            mytext = <div className='textbox'> <p></p>\n            <p> Wellcome on board of the space explorer!</p>\n            <p><span class=\"bold\">Your goal is to help us find the planet with more resources!</span>. </p>\n            <p> At the end of the game, you will receive a score telling you how well you did.</p></div>; \n            <Image source={require('../../images/sky.png')} style={styles.backgroundImage} />\n        }\n        else if (this.state.currentInstructionText===2) {\n        mytext = <div className='textbox'> <p></p> <p>You will make choice between two planets.</p> \n                <div className=\"translate\"/>\n                <div className=\"symbolframe\">    \n                    <img className=\"introsymbol\"  src={require('../../images/planet_5.png')} alt='introsymbol'/> \n                    <img className=\"introsymbol\"  src={require('../../images/planet_6.png')} alt='introsymbol'/> \n                </div>\n                <p>After each choice you will see how many diamonds (between 1 and 99) you managed to dig from the planet!</p>\n                <p>There is always one planet that gives more diamonds during some time but it will change through the game!</p>\n                <p>You should pay attention and try to remember the outcomes of your previous choices in order to select the right planet!</p>\n                \n                </div>\n            }\n\n        else if (this.state.currentInstructionText===3) {\n            mytext = <div className='textbox'> <p></p>\n            <p>Sometimes even a good planet could give fewer diamonds, and a bad planet could pay a lot but you should consider several digs in a row when making your choice!</p>\n            </div>;\n        }\n\n        return (\n            <div>\n            <div className=\"center translate\">\n            <div className=\"InstructText\">\n            <center> \n            <p className='title'><span class=\"bold\">INSTRUCTIONS</span></p>\n            </center>\n                <center> \n                <div className=\"instructionsButtonContainer\">\n\n                    {this.state.currentInstructionText > 1 ? // id helps get which button was clicked to handle the \n\n                        <Button id=\"left\" className=\"buttonInstructions\" onClick={this.handleInstructionsLocal}> \n                            <span class=\"bold\">&#8592;</span>\n                        </Button>\n                        :\n                        <Button id=\"left\" className=\"buttonInstructionsHidden\">\n                            <span class=\"bold\">&#8592;</span>\n                        </Button>\n                    }\n\n                    {this.state.currentInstructionText < 3 ?\n                        <Button id=\"right\" className=\"buttonInstructions\" onClick={this.handleInstructionsLocal}>\n                            <span class=\"bold\">&#8594;</span>\n                        </Button>\n                        :\n                        <Button id=\"right\" className=\"buttonInstructionsHidden\">\n                            <span class=\"bold\">&#8594;</span>\n                        </Button>\n                    }\n\n                    <div>\n                        {mytext}\n                    </div>\n                    {this.state.readyToProceed ?\n                    <div className=\"buttonInstructionStart\">\n                    <center>\n                        <label className='textbox'> Let's practice !</label><br/>\n                        <Button className=\"buttonInstructionStart\" onClick={()=>this.redirectToTarget()}>\n                            <span class=\"bold\">START</span>\n                        </Button>\n                    </center>\n                    \n                    </div>\n                    : null}\n\n            </div>\n        </center>\n        </div>\n        </div>\n        </div>\n        ) \n    }\n}\n\nexport default withRouter(Instructions);\n"]},"metadata":{},"sourceType":"module"}