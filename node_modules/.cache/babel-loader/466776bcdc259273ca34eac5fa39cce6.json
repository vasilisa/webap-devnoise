{"ast":null,"code":"var _jsxFileName = \"/Users/vasilisaskvortsova/Documents/RLNOISE_KIDS/webap-rlnoise-kids/src/components/Instructions/Instructions.js\";\nimport React from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { Button } from 'react-bootstrap';\nimport { API_URL } from '../../config';\nimport { handleResponse } from '../helpers';\nimport './Instructions.css';\n/*\nInstruction component is created when the particpant accepts terms and conditions and proceeds to the experiment. \nIt loads the participant id, and the block configurations that will be played during the game. \n*/\n\nclass Instructions extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.redirectToTarget = () => {\n      this.props.history.push({\n        pathname: `/Block`,\n        state: {\n          participant_info: this.state,\n          newblock_frame: this.state.newblock_frame\n        }\n      });\n    };\n\n    const prolific_id = 'undefined';\n    var currentDate = new Date();\n    var date = currentDate.getDate();\n    var month = currentDate.getMonth(); //Be careful! January is 0 not 1\n\n    var year = currentDate.getFullYear();\n    var dateString = date + \"-\" + (month + 1) + \"-\" + year;\n    this.state = {\n      date: dateString,\n      participant_id: 1,\n      // default\n      game_id: '',\n      // to be determined \n      block_number: 0,\n      currentInstructionText: 1,\n      TotalBlock: 2,\n      // 1 training short and 1 full block   \n      newblock_frame: true,\n      readyToProceed: false,\n      redirect: false,\n      prolific_id: prolific_id\n    };\n    this.handleInstructionsLocal = this.handleInstructionsLocal.bind(this); // bind the method to avoid error on frames collapsed\n\n    this.fetchParticipantInfo.bind(this);\n    this.fetchParticipantGameId.bind(this);\n  }\n\n  // Mount the component to call the BACKEND and GET the information\n  componentWillMount() {\n    // document.body.style.background = \"fff\";  \n    this.fetchParticipantInfo();\n  }\n\n  fetchParticipantInfo() {\n    fetch(`${API_URL}/participants_data/last_participant_id`).then(handleResponse).then(data => {\n      const participant_id_ = parseInt(data['new_participant_id']);\n      console.log(participant_id_);\n      this.setState({\n        participant_id: participant_id_\n      });\n      this.fetchParticipantGameId(participant_id_);\n    }).catch(error => {\n      console.log(error);\n    });\n  } // Based on the participant ID, determine the game_id and then fetch the game specifications \n\n\n  fetchParticipantGameId() {\n    fetch(`${API_URL}/participants_game/` + this.state.participant_id + '/' + this.state.prolific_id + '/' + this.state.date).then(handleResponse).then(data => {\n      const game_id_ = parseInt(data['game_id']);\n      console.log(game_id_);\n      this.setState({\n        game_id: game_id_\n      });\n    }).catch(error => {\n      console.log(error);\n    });\n  } // Transition between the instruction screens   \n\n\n  handleInstructionsLocal(event) {\n    var curText = this.state.currentInstructionText;\n    var whichButton = event.currentTarget.id;\n\n    if (whichButton === \"left\" && curText > 1) {\n      this.setState({\n        currentInstructionText: curText - 1,\n        readyToProceed: false\n      });\n    } else if (whichButton === \"right\" && curText <= 3) {\n      this.setState({\n        currentInstructionText: curText + 1,\n        readyToProceed: false\n      });\n    } else if (whichButton === \"right\" && this.state.currentInstructionText === 4) {\n      this.setState({\n        readyToProceed: true\n      });\n      console.log(this.state.readyToProceed);\n    } else if (whichButton === \"left\" && this.state.currentInstructionText === 3) {\n      this.setState({\n        readyToProceed: false,\n        currentInstructionText: curText + 1\n      });\n    }\n\n    ;\n  } // change the router type to pass the props to the child component \n\n\n  render() {\n    let mytext;\n\n    if (this.state.currentInstructionText === 1) {\n      mytext = React.createElement(\"div\", {\n        className: \"textbox\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, \" \", React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }, \" Wellcome on board of the space explorer!\"), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        class: \"bold\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, \"Your goal is to help us find the planet with more treasures!\")), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, \" At the end of the game, you will receive a score telling you how well you did.\"));\n    } else if (this.state.currentInstructionText === 2) {\n      mytext = React.createElement(\"div\", {\n        className: \"textbox\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, \" \", React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }), \" \", React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, \"You will make choice between two planets.\"), React.createElement(\"div\", {\n        className: \"translate\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"symbolframe\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        className: \"introsymbol\",\n        src: require('../../images/planet_5.png'),\n        alt: \"introsymbol\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }), React.createElement(\"img\", {\n        className: \"introsymbol\",\n        src: require('../../images/planet_6.png'),\n        alt: \"introsymbol\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      })), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }, \"After each choice you will see how many treasures (between 1 and 99) you managed to dig from the planet!\"));\n    } else if (this.state.currentInstructionText === 3) {\n      mytext = React.createElement(\"div\", {\n        className: \"textbox\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, \" \", React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, \"There is always one planet that gives more treasures than the other!\"), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, \"But this will change through the game!\"), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, \"You should pay attention and try to remember which planet gave more treasures in the past in order to select the right planet!\"), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, \"Sometimes even a good planet could give fewer treasures, and a bad planet could give a lot but you should consider several digs in a row when making your choice!\"));\n    } else if (this.state.currentInstructionText === 4) {\n      mytext = React.createElement(\"div\", {\n        className: \"textbox\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, \" \", React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, \"Let's do some practice!\"));\n    }\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"translate center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"InstructText\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, React.createElement(\"center\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      class: \"bold\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }, \"INSTRUCTIONS\")))), React.createElement(\"center\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"instructionsButtonContainer\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }, this.state.currentInstructionText > 1 ? // id helps get which button was clicked to handle the \n    React.createElement(Button, {\n      id: \"left\",\n      className: \"buttonInstructions\",\n      onClick: this.handleInstructionsLocal,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      class: \"bold\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }, \"\\u2190\")) : React.createElement(Button, {\n      id: \"left\",\n      className: \"buttonInstructionsHidden\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      class: \"bold\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }, \"\\u2190\")), this.state.currentInstructionText <= 4 ? React.createElement(Button, {\n      id: \"right\",\n      className: \"buttonInstructions\",\n      onClick: this.handleInstructionsLocal,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      class: \"bold\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }, \"\\u2192\")) : React.createElement(Button, {\n      id: \"right\",\n      className: \"buttonInstructionsHidden\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      class: \"bold\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }, \"\\u2192\"))), this.state.readyToProceed ? this.redirectToTarget() : null, React.createElement(\"div\", {\n      className: \"text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192\n      },\n      __self: this\n    }, mytext)), React.createElement(\"div\", {\n      className: \"astro\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      className: \"astro\",\n      src: require('../../images/astraunot.png'),\n      alt: \"astro\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199\n      },\n      __self: this\n    })))));\n  }\n\n}\n\nexport default withRouter(Instructions);","map":{"version":3,"sources":["/Users/vasilisaskvortsova/Documents/RLNOISE_KIDS/webap-rlnoise-kids/src/components/Instructions/Instructions.js"],"names":["React","withRouter","Button","API_URL","handleResponse","Instructions","Component","constructor","props","redirectToTarget","history","push","pathname","state","participant_info","newblock_frame","prolific_id","currentDate","Date","date","getDate","month","getMonth","year","getFullYear","dateString","participant_id","game_id","block_number","currentInstructionText","TotalBlock","readyToProceed","redirect","handleInstructionsLocal","bind","fetchParticipantInfo","fetchParticipantGameId","componentWillMount","fetch","then","data","participant_id_","parseInt","console","log","setState","catch","error","game_id_","event","curText","whichButton","currentTarget","id","render","mytext","require"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {withRouter} from 'react-router-dom';\nimport { Button } from 'react-bootstrap';\n\nimport { API_URL } from '../../config';\nimport { handleResponse } from '../helpers';\nimport './Instructions.css';\n\n/*\nInstruction component is created when the particpant accepts terms and conditions and proceeds to the experiment. \nIt loads the participant id, and the block configurations that will be played during the game. \n*/\n\nclass Instructions extends React.Component {\n    constructor(props) {\n        super(props);\n\n        const prolific_id = 'undefined'\n\n        var currentDate = new Date();\n        var date        = currentDate.getDate();\n        var month       = currentDate.getMonth(); //Be careful! January is 0 not 1\n        var year        = currentDate.getFullYear();\n        var dateString  = date + \"-\" +(month + 1) + \"-\" + year;\n    \n        this.state = {\n            date: dateString,\n            participant_id : 1, // default\n            game_id : '',       // to be determined \n            block_number : 0, \n            currentInstructionText: 1,\n            TotalBlock: 2, // 1 training short and 1 full block   \n            newblock_frame : true, \n            readyToProceed: false,\n            redirect: false,\n            prolific_id : prolific_id \n        }\n\n    this.handleInstructionsLocal = this.handleInstructionsLocal.bind(this) // bind the method to avoid error on frames collapsed\n    this.fetchParticipantInfo.bind(this); \n    this.fetchParticipantGameId.bind(this); \n       \n    }; \n\n    // Mount the component to call the BACKEND and GET the information\n    componentWillMount() {\n    // document.body.style.background = \"fff\";  \n    this.fetchParticipantInfo();\n    } \n    \n    fetchParticipantInfo () {\n         fetch(`${API_URL}/participants_data/last_participant_id`) \n           .then(handleResponse)\n           .then((data) => {\n             const participant_id_ = parseInt(data['new_participant_id'])\n             \n            console.log(participant_id_)\n            \n            this.setState({\n                     participant_id : participant_id_,\n                 });\n             this.fetchParticipantGameId(participant_id_)\n         })\n           .catch((error) => {\n            console.log(error)\n         });\n        }\n\n    // Based on the participant ID, determine the game_id and then fetch the game specifications \n    fetchParticipantGameId() {\n        fetch(`${API_URL}/participants_game/`+this.state.participant_id +'/'+this.state.prolific_id +'/'+this.state.date) \n           .then(handleResponse)\n           .then((data) => {\n             const game_id_ = parseInt(data['game_id'])\n            console.log(game_id_)\n            this.setState({\n                     game_id : game_id_,\n                 });\n         })\n           .catch((error) => {\n            console.log(error)\n         });\n        }\n\n    // Transition between the instruction screens   \n    handleInstructionsLocal(event){\n        var curText     = this.state.currentInstructionText;\n        var whichButton = event.currentTarget.id;\n    \n        if(whichButton===\"left\" && curText > 1){\n        this.setState({currentInstructionText: curText-1,\n            readyToProceed: false});\n        }\n        else if(whichButton===\"right\" && curText <= 3){\n      \n        this.setState({currentInstructionText: curText+1,\n        readyToProceed: false});\n        }\n        else if(whichButton===\"right\" && this.state.currentInstructionText===4){\n            this.setState({readyToProceed: true})\n            console.log(this.state.readyToProceed)\n        }\n        else if(whichButton===\"left\" && this.state.currentInstructionText===3){\n            this.setState({readyToProceed: false,\n                          currentInstructionText: curText+1})\n        }; \n    }\n\n    // change the router type to pass the props to the child component \n    redirectToTarget = () => {\n    this.props.history.push({\n       pathname: `/Block`,\n       state: {participant_info: this.state, newblock_frame:this.state.newblock_frame} \n     })\n    }\n\n    render() {\n        let mytext\n        if (this.state.currentInstructionText===1) {\n            mytext = <div className='textbox'> <p></p>\n            <p> Wellcome on board of the space explorer!</p>\n            <p><span class=\"bold\">Your goal is to help us find the planet with more treasures!</span></p>\n            <p> At the end of the game, you will receive a score telling you how well you did.</p>\n            </div>;\n        }\n        else if (this.state.currentInstructionText===2) {\n        mytext = <div className='textbox'> <p></p> <p>You will make choice between two planets.</p> \n                <div className=\"translate\"/>\n                <div className=\"symbolframe\">    \n                    <img className=\"introsymbol\"  src={require('../../images/planet_5.png')} alt='introsymbol'/> \n                    <img className=\"introsymbol\"  src={require('../../images/planet_6.png')} alt='introsymbol'/> \n                </div>\n                <p>After each choice you will see how many treasures (between 1 and 99) you managed to dig from the planet!</p>\n                </div>\n            }\n\n        else if (this.state.currentInstructionText===3) {\n            mytext = <div className='textbox'> <p></p>\n            <p></p>\n            <p>There is always one planet that gives more treasures than the other!</p>\n            <p>But this will change through the game!</p>\n            <p>You should pay attention and try to remember which planet gave more treasures in the past in order to select the right planet!</p>\n            <p>Sometimes even a good planet could give fewer treasures, and a bad planet could give a lot but you should consider several digs in a row when making your choice!</p>\n            </div>; }\n\n        else if(this.state.currentInstructionText===4) {\n            mytext = <div className='textbox'> <p></p>\n            <p></p>\n            <p>Let's do some practice!</p>\n            </div>; } \n        \n\n        return (\n            <div>\n            <div className=\"translate center\">\n            <div className='InstructText'>\n            <center>\n                <div className='title'>\n                    <p><span class=\"bold\">INSTRUCTIONS</span></p>\n                </div>\n            </center>\n            <center> \n                <div className=\"instructionsButtonContainer\">\n\n                    {this.state.currentInstructionText > 1 ? // id helps get which button was clicked to handle the \n\n                        <Button id=\"left\" className=\"buttonInstructions\" onClick={this.handleInstructionsLocal}> \n                            <span class=\"bold\">&#8592;</span>\n                        </Button>\n                        :\n                        <Button id=\"left\" className=\"buttonInstructionsHidden\">\n                            <span class=\"bold\">&#8592;</span>\n                        </Button>\n                    }\n\n                    {this.state.currentInstructionText <= 4 ?\n                        <Button id=\"right\" className=\"buttonInstructions\" onClick={this.handleInstructionsLocal}>\n                            <span class=\"bold\">&#8594;</span>\n                        </Button>\n                        :\n                        <Button id=\"right\" className=\"buttonInstructionsHidden\">\n                            <span class=\"bold\">&#8594;</span>\n                        </Button>\n                    }\n                    </div>\n\n                    {this.state.readyToProceed ? \n                        this.redirectToTarget()\n                        : \n                    null\n                }\n                <div className='text'>\n                    {mytext}\n                </div>\n            \n        </center>\n        \n        <div className=\"astro\">\n                <img className=\"astro\" src={require('../../images/astraunot.png')} alt='astro'/>\n        </div>\n        </div>   \n        </div>\n        </div>\n        ) \n    }\n}\n\nexport default withRouter(Instructions);\n"]},"metadata":{},"sourceType":"module"}